{"ast":null,"code":"var _jsxFileName = \"/Users/james/Projects/cms/frontend/src/utils/cartContext.js\";\n/* eslint-disable */\n\nimport React, { createContext, useContext, useState } from \"react\";\nconst CartContext = createContext();\nexport function CartProvider({\n  children\n}) {\n  const [cartItems, setCartItems] = useState([]);\n  const addToCart = item => {\n    // 检查购物车中是否已经存在该商品\n    const existingItem = cartItems.find(cartItem => cartItem.product_id === item.product_id);\n    if (existingItem) {\n      // 如果商品已经存在，增加其数量\n      const updatedCart = cartItems.map(cartItem => cartItem.product_id === item.product_id ? {\n        ...cartItem,\n        quantity: cartItem.quantity + 1\n      } : cartItem);\n      setCartItems(updatedCart);\n    } else {\n      // 如果商品不存在，添加新的商品项\n      setCartItems([...cartItems, {\n        ...item,\n        quantity: 1\n      }]);\n    }\n  };\n  const removeFromCart = item => {\n    const existingItem = cartItems.find(cartItem => cartItem.product_id === item.product_id);\n    if (existingItem) {\n      if (existingItem.quantity > 1) {\n        // 如果商品数量大于 1，减少其数量\n        const updatedCart = cartItems.map(cartItem => cartItem.product_id === item.product_id ? {\n          ...cartItem,\n          quantity: cartItem.quantity - 1\n        } : cartItem);\n        setCartItems(updatedCart);\n      } else {\n        // 如果商品数量为 1，从购物车中移除该商品\n        const updatedCart = cartItems.filter(cartItem => cartItem.product_id !== item.product_id);\n        setCartItems(updatedCart);\n      }\n    }\n  };\n  const removeAllFromCart = item => {\n    const updatedCart = cartItems.filter(cartItem => cartItem.product_id !== item.product_id);\n    setCartItems(updatedCart);\n  };\n  const showCart = () => {\n    console.log(cartItems);\n  };\n  return /*#__PURE__*/React.createElement(CartContext.Provider, {\n    value: {\n      cartItems,\n      addToCart,\n      removeFromCart,\n      removeAllFromCart,\n      showCart\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, children);\n}\nexport function useCart() {\n  return useContext(CartContext);\n}","map":{"version":3,"names":["React","createContext","useContext","useState","CartContext","CartProvider","children","cartItems","setCartItems","addToCart","item","existingItem","find","cartItem","product_id","updatedCart","map","quantity","removeFromCart","filter","removeAllFromCart","showCart","console","log","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","useCart"],"sources":["/Users/james/Projects/cms/frontend/src/utils/cartContext.js"],"sourcesContent":["/* eslint-disable */\n\nimport React, { createContext, useContext, useState } from \"react\";\n\nconst CartContext = createContext();\n\nexport function CartProvider({ children }) {\n  const [cartItems, setCartItems] = useState([]);\n\n  const addToCart = (item) => {\n    // 检查购物车中是否已经存在该商品\n    const existingItem = cartItems.find(\n      (cartItem) => cartItem.product_id === item.product_id,\n    );\n\n    if (existingItem) {\n      // 如果商品已经存在，增加其数量\n      const updatedCart = cartItems.map((cartItem) =>\n        cartItem.product_id === item.product_id\n          ? { ...cartItem, quantity: cartItem.quantity + 1 }\n          : cartItem,\n      );\n      setCartItems(updatedCart);\n    } else {\n      // 如果商品不存在，添加新的商品项\n      setCartItems([...cartItems, { ...item, quantity: 1 }]);\n    }\n  };\n\n  const removeFromCart = (item) => {\n    const existingItem = cartItems.find(\n      (cartItem) => cartItem.product_id === item.product_id,\n    );\n    if (existingItem) {\n      if (existingItem.quantity > 1) {\n        // 如果商品数量大于 1，减少其数量\n        const updatedCart = cartItems.map((cartItem) =>\n          cartItem.product_id === item.product_id\n            ? { ...cartItem, quantity: cartItem.quantity - 1 }\n            : cartItem,\n        );\n        setCartItems(updatedCart);\n      } else {\n        // 如果商品数量为 1，从购物车中移除该商品\n        const updatedCart = cartItems.filter(\n          (cartItem) => cartItem.product_id !== item.product_id,\n        );\n        setCartItems(updatedCart);\n      }\n    }\n  };\n\n  const removeAllFromCart = (item) => {\n    const updatedCart = cartItems.filter(\n      (cartItem) => cartItem.product_id !== item.product_id,\n    );\n    setCartItems(updatedCart);\n  };\n\n  const showCart = () => {\n    console.log(cartItems);\n  }\n\n\n  return (\n    <CartContext.Provider\n      value={{ cartItems, addToCart, removeFromCart, removeAllFromCart, showCart }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  return useContext(CartContext);\n}\n"],"mappings":";AAAA;;AAEA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAElE,MAAMC,WAAW,GAAGH,aAAa,CAAC,CAAC;AAEnC,OAAO,SAASI,YAAYA,CAAC;EAAEC;AAAS,CAAC,EAAE;EACzC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAE9C,MAAMM,SAAS,GAAIC,IAAI,IAAK;IAC1B;IACA,MAAMC,YAAY,GAAGJ,SAAS,CAACK,IAAI,CAChCC,QAAQ,IAAKA,QAAQ,CAACC,UAAU,KAAKJ,IAAI,CAACI,UAC7C,CAAC;IAED,IAAIH,YAAY,EAAE;MAChB;MACA,MAAMI,WAAW,GAAGR,SAAS,CAACS,GAAG,CAAEH,QAAQ,IACzCA,QAAQ,CAACC,UAAU,KAAKJ,IAAI,CAACI,UAAU,GACnC;QAAE,GAAGD,QAAQ;QAAEI,QAAQ,EAAEJ,QAAQ,CAACI,QAAQ,GAAG;MAAE,CAAC,GAChDJ,QACN,CAAC;MACDL,YAAY,CAACO,WAAW,CAAC;IAC3B,CAAC,MAAM;MACL;MACAP,YAAY,CAAC,CAAC,GAAGD,SAAS,EAAE;QAAE,GAAGG,IAAI;QAAEO,QAAQ,EAAE;MAAE,CAAC,CAAC,CAAC;IACxD;EACF,CAAC;EAED,MAAMC,cAAc,GAAIR,IAAI,IAAK;IAC/B,MAAMC,YAAY,GAAGJ,SAAS,CAACK,IAAI,CAChCC,QAAQ,IAAKA,QAAQ,CAACC,UAAU,KAAKJ,IAAI,CAACI,UAC7C,CAAC;IACD,IAAIH,YAAY,EAAE;MAChB,IAAIA,YAAY,CAACM,QAAQ,GAAG,CAAC,EAAE;QAC7B;QACA,MAAMF,WAAW,GAAGR,SAAS,CAACS,GAAG,CAAEH,QAAQ,IACzCA,QAAQ,CAACC,UAAU,KAAKJ,IAAI,CAACI,UAAU,GACnC;UAAE,GAAGD,QAAQ;UAAEI,QAAQ,EAAEJ,QAAQ,CAACI,QAAQ,GAAG;QAAE,CAAC,GAChDJ,QACN,CAAC;QACDL,YAAY,CAACO,WAAW,CAAC;MAC3B,CAAC,MAAM;QACL;QACA,MAAMA,WAAW,GAAGR,SAAS,CAACY,MAAM,CACjCN,QAAQ,IAAKA,QAAQ,CAACC,UAAU,KAAKJ,IAAI,CAACI,UAC7C,CAAC;QACDN,YAAY,CAACO,WAAW,CAAC;MAC3B;IACF;EACF,CAAC;EAED,MAAMK,iBAAiB,GAAIV,IAAI,IAAK;IAClC,MAAMK,WAAW,GAAGR,SAAS,CAACY,MAAM,CACjCN,QAAQ,IAAKA,QAAQ,CAACC,UAAU,KAAKJ,IAAI,CAACI,UAC7C,CAAC;IACDN,YAAY,CAACO,WAAW,CAAC;EAC3B,CAAC;EAED,MAAMM,QAAQ,GAAGA,CAAA,KAAM;IACrBC,OAAO,CAACC,GAAG,CAAChB,SAAS,CAAC;EACxB,CAAC;EAGD,oBACEP,KAAA,CAAAwB,aAAA,CAACpB,WAAW,CAACqB,QAAQ;IACnBC,KAAK,EAAE;MAAEnB,SAAS;MAAEE,SAAS;MAAES,cAAc;MAAEE,iBAAiB;MAAEC;IAAS,CAAE;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAE5E1B,QACmB,CAAC;AAE3B;AAEA,OAAO,SAAS2B,OAAOA,CAAA,EAAG;EACxB,OAAO/B,UAAU,CAACE,WAAW,CAAC;AAChC"},"metadata":{},"sourceType":"module"}